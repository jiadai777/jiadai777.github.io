/*
 * YoutubeBackground - A wrapper for the Youtube API - Great for fullscreen background videos or just regular videos.
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 *
 * Version:  1.0.1
 *
 */

"function"!=typeof Object.create&&(Object.create=function(e){function a(){}return a.prototype=e,new a}),function(e,a,t){var o=function(e){var o=t.createElement("script"),i=t.getElementsByTagName("head")[0];"file://"==a.location.origin?o.src="http://www.youtube.com/iframe_api":o.src="//www.youtube.com/iframe_api",i.appendChild(o),i=null,o=null,n(e)},n=function(t){"undefined"==typeof YT&&"undefined"==typeof a.loadingPlayer?(a.loadingPlayer=!0,a.dfd=e.Deferred(),a.onYouTubeIframeAPIReady=function(){a.onYouTubeIframeAPIReady=null,a.dfd.resolve("done"),t()}):"object"==typeof YT?t():a.dfd.done(function(){t()})},i={player:null,defaults:{ratio:16/9,videoId:"LSmgKRx5pBo",mute:!0,repeat:!0,width:e(a).width(),playButtonClass:"YTPlayer-play",pauseButtonClass:"YTPlayer-pause",muteButtonClass:"YTPlayer-mute",volumeUpClass:"YTPlayer-volume-up",volumeDownClass:"YTPlayer-volume-down",start:0,pauseOnScroll:!1,fitToBackground:!0,playerVars:{iv_load_policy:3,modestbranding:1,autoplay:1,controls:0,showinfo:0,wmode:"opaque",branding:0,autohide:0},events:null},init:function(t,n){var i=this;return i.userOptions=n,i.$body=e("body"),i.$node=e(t),i.$window=e(a),i.defaults.events={onReady:function(e){i.onPlayerReady(e),i.options.pauseOnScroll&&i.pauseOnScroll(),"function"==typeof i.options.callback&&i.options.callback.call(this)},onStateChange:function(e){1===e.data?(i.$node.find("img").fadeOut(400),i.$node.addClass("ytplayer-loaded")):0===e.data&&i.options.repeat&&i.player.seekTo(i.options.start)}},i.options=e.extend(!0,{},i.defaults,i.userOptions),i.options.height=Math.ceil(i.options.width/i.options.ratio),i.ID=(new Date).getTime(),i.holderID="YTPlayer-ID-"+i.ID,i.options.fitToBackground?i.createBackgroundVideo():i.createContainerVideo(),i.$window.on("resize.YTplayer"+i.ID,function(){i.resize(i)}),o(i.onYouTubeIframeAPIReady.bind(i)),i.resize(i),i},pauseOnScroll:function(){var e=this;e.$window.on("scroll.YTplayer"+e.ID,function(){var a=e.player.getPlayerState();1===a&&e.player.pauseVideo()}),e.$window.scrollStopped(function(){var a=e.player.getPlayerState();2===a&&e.player.playVideo()})},createContainerVideo:function(){var a=this,t=e('<div id="ytplayer-container'+a.ID+'" >                                    <div id="'+a.holderID+'" class="ytplayer-player"></div>                                     </div>                                     <div id="ytplayer-shield" class="ytplayer-shield"></div>');a.$node.append(t),a.$YTPlayerString=t,t=null},createBackgroundVideo:function(){var a=this,t=e('<div id="ytplayer-container'+a.ID+'" class="ytplayer-container background">                                    <div id="'+a.holderID+'" class="ytplayer-player"></div>                                    </div>                                    <div id="ytplayer-shield" class="ytplayer-shield"></div>');a.$node.append(t),a.$YTPlayerString=t,t=null},resize:function(t){var o=e(a);t.options.fitToBackground||(o=t.$node);var n,i,r=o.width(),s=o.height(),l=e("#"+t.holderID);r/t.options.ratio<s?(n=Math.ceil(s*t.options.ratio),l.width(n).height(s).css({left:(r-n)/2,top:0})):(i=Math.ceil(r/t.options.ratio),l.width(r).height(i).css({left:0,top:0})),l=null,o=null},onYouTubeIframeAPIReady:function(){var e=this;e.player=new a.YT.Player(e.holderID,e.options)},onPlayerReady:function(e){this.options.mute&&e.target.mute(),e.target.playVideo()},getPlayer:function(){return this.player},destroy:function(){var t=this;t.$node.removeData("yt-init").removeData("ytPlayer").removeClass("ytplayer-loaded"),t.$YTPlayerString.remove(),e(a).off("resize.YTplayer"+t.ID),e(a).off("scroll.YTplayer"+t.ID),t.$body=null,t.$node=null,t.$YTPlayerString=null,t.player.destroy(),t.player=null}};e.fn.scrollStopped=function(a){var t=e(this),o=this;t.scroll(function(){t.data("scrollTimeout")&&clearTimeout(t.data("scrollTimeout")),t.data("scrollTimeout",setTimeout(a,250,o))})},e.fn.YTPlayer=function(a){return this.each(function(){var t=this;e(t).data("yt-init",!0);var o=Object.create(i);o.init(t,a),e.data(t,"ytPlayer",o)})}}(jQuery,window,document);
